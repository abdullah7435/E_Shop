"use strict";(self.webpackChunkbackend=self.webpackChunkbackend||[]).push([[5833],{36833:(W,L,t)=>{t.d(L,{pl:()=>v,aY:()=>G,q5:()=>u});var i=t(67294),r=t(57993),T=t(25804),M=t(18172);const O={data:[],isLoading:!0},I=(e,n)=>(0,M.ZP)(e,s=>{switch(n.type){case"GET_DATA_SUCCEEDED":{s.data=n.data,s.isLoading=!1;break}case"GET_DATA_ERROR":{s.isLoading=!1;break}default:return s}}),v=({ssoEnabled:e})=>{const[n,s]=(0,i.useReducer)(I,O),l=(0,r.lm)(),{get:c}=(0,r.kY)();return(0,i.useEffect)(()=>{(async()=>{try{if(!e){s({type:"GET_DATA_SUCCEEDED",data:[]});return}const{data:o}=await c((0,T.IF)("providers"));s({type:"GET_DATA_SUCCEEDED",data:o})}catch(o){console.error(o),s({type:"GET_DATA_ERROR"}),l({type:"warning",message:{id:"notification.error"}})}})()},[c,e,l]),n};var C=t(14293),P=t.n(C),h=t(86896),p=t(16550),g=t(88767),R=t(86706),A=t(36364);function _(){const e=(0,R.v9)(A._),{get:n}=(0,r.kY)(),{isLoading:s,allowedActions:{canRead:l,canCreate:c,canUpdate:E,canDelete:o}}=(0,r.ss)(e.settings.users),m=l&&c&&E&&o,{data:a,isError:f,isLoading:y}=(0,g.useQuery)(["ee","license-limit-info"],async()=>{const{data:{data:U}}=await n("/admin/license-limit-information");return U},{enabled:!s&&m}),d=a??{},$=i.useCallback(U=>(d?.features??[]).find(Z=>Z.name===U)?.options??{},[d?.features]);return{license:d,getFeature:$,isError:f,isLoading:y}}const u=_,D="strapi-notification-seat-limit",S="https://cloud.strapi.io/profile/billing",N="https://strapi.io/billing/request-seats",G=()=>{const{formatMessage:e}=(0,h.Z)();let{license:n,isError:s,isLoading:l}=u();const c=(0,r.lm)(),{pathname:E}=(0,p.TH)(),{enforcementUserCount:o,permittedSeats:m,licenseLimitStatus:a,isHostedOnStrapiCloud:f}=n;(0,i.useEffect)(()=>{if(s||l)return;const y=!P()(m)&&!window.sessionStorage.getItem(`${D}-${E}`)&&(a==="AT_LIMIT"||a==="OVER_LIMIT");let d;a==="OVER_LIMIT"?d="warning":a==="AT_LIMIT"&&(d="softWarning"),y&&c({type:d,message:e({id:"notification.ee.warning.over-.message",defaultMessage:"Add seats to {licenseLimitStatus, select, OVER_LIMIT {invite} other {re-enable}} Users. If you already did it but it's not reflected in Strapi yet, make sure to restart your app."},{licenseLimitStatus:a}),title:e({id:"notification.ee.warning.at-seat-limit.title",defaultMessage:"{licenseLimitStatus, select, OVER_LIMIT {Over} other {At}} seat limit ({enforcementUserCount}/{permittedSeats})"},{licenseLimitStatus:a,enforcementUserCount:o,permittedSeats:m}),link:{url:f?S:N,label:e({id:"notification.ee.warning.seat-limit.link",defaultMessage:"{isHostedOnStrapiCloud, select, true {ADD SEATS} other {CONTACT SALES}}"},{isHostedOnStrapiCloud:f})},blockTransition:!0,onClose(){window.sessionStorage.setItem(`${D}-${E}`,!0)}})},[c,n,E,e,l,m,a,o,f,s])}},85833:(W,L,t)=>{t.r(L),t.d(L,{CreateActionEE:()=>g});var i=t(67294),r=t(11047),T=t(84495),M=t(52624),O=t(29728),B=t(51277),I=t(23293),K=t(14293),v=t.n(K),C=t(45697),P=t.n(C),h=t(86896),p=t(36833);const g=({onClick:R})=>{const{formatMessage:A}=(0,h.Z)(),{license:{permittedSeats:_,shouldStopCreate:u},isError:D,isLoading:S}=(0,p.q5)();return D||S?null:i.createElement(r.k,{gap:2},!v()(_)&&u&&i.createElement(T.u,{description:A({id:"Settings.application.admin-seats.at-limit-tooltip",defaultMessage:"At limit: add seats to invite more users"}),position:"left"},i.createElement(M.J,{width:`${14/16}rem`,height:`${14/16}rem`,color:"danger500",as:B.Z})),i.createElement(O.z,{"data-testid":"create-user-button",onClick:R,startIcon:i.createElement(I.Z,null),size:"S",disabled:u},A({id:"Settings.permissions.users.create",defaultMessage:"Invite new user"})))};g.propTypes={onClick:P().func.isRequired}}}]);
