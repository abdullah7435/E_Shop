"use strict";(self.webpackChunkbackend=self.webpackChunkbackend||[]).push([[5013],{36833:(Z,I,t)=>{t.d(I,{pl:()=>C,aY:()=>B,q5:()=>L});var e=t(67294),r=t(57993),g=t(25804),D=t(18172);const T={data:[],isLoading:!0},p=(i,n)=>(0,D.ZP)(i,s=>{switch(n.type){case"GET_DATA_SUCCEEDED":{s.data=n.data,s.isLoading=!1;break}case"GET_DATA_ERROR":{s.isLoading=!1;break}default:return s}}),C=({ssoEnabled:i})=>{const[n,s]=(0,e.useReducer)(p,T),l=(0,r.lm)(),{get:c}=(0,r.kY)();return(0,e.useEffect)(()=>{(async()=>{try{if(!i){s({type:"GET_DATA_SUCCEEDED",data:[]});return}const{data:o}=await c((0,g.IF)("providers"));s({type:"GET_DATA_SUCCEEDED",data:o})}catch(o){console.error(o),s({type:"GET_DATA_ERROR"}),l({type:"warning",message:{id:"notification.error"}})}})()},[c,i,l]),n};var _=t(14293),v=t.n(_),h=t(86896),P=t(16550),R=t(88767),S=t(86706),E=t(36364);function U(){const i=(0,S.v9)(E._),{get:n}=(0,r.kY)(),{isLoading:s,allowedActions:{canRead:l,canCreate:c,canUpdate:m,canDelete:o}}=(0,r.ss)(i.settings.users),f=l&&c&&m&&o,{data:a,isError:A,isLoading:W}=(0,R.useQuery)(["ee","license-limit-info"],async()=>{const{data:{data:K}}=await n("/admin/license-limit-information");return K},{enabled:!s&&f}),d=a??{},H=e.useCallback(K=>(d?.features??[]).find(x=>x.name===K)?.options??{},[d?.features]);return{license:d,getFeature:H,isError:A,isLoading:W}}const L=U,u="strapi-notification-seat-limit",O="https://cloud.strapi.io/profile/billing",y="https://strapi.io/billing/request-seats",B=()=>{const{formatMessage:i}=(0,h.Z)();let{license:n,isError:s,isLoading:l}=L();const c=(0,r.lm)(),{pathname:m}=(0,P.TH)(),{enforcementUserCount:o,permittedSeats:f,licenseLimitStatus:a,isHostedOnStrapiCloud:A}=n;(0,e.useEffect)(()=>{if(s||l)return;const W=!v()(f)&&!window.sessionStorage.getItem(`${u}-${m}`)&&(a==="AT_LIMIT"||a==="OVER_LIMIT");let d;a==="OVER_LIMIT"?d="warning":a==="AT_LIMIT"&&(d="softWarning"),W&&c({type:d,message:i({id:"notification.ee.warning.over-.message",defaultMessage:"Add seats to {licenseLimitStatus, select, OVER_LIMIT {invite} other {re-enable}} Users. If you already did it but it's not reflected in Strapi yet, make sure to restart your app."},{licenseLimitStatus:a}),title:i({id:"notification.ee.warning.at-seat-limit.title",defaultMessage:"{licenseLimitStatus, select, OVER_LIMIT {Over} other {At}} seat limit ({enforcementUserCount}/{permittedSeats})"},{licenseLimitStatus:a,enforcementUserCount:o,permittedSeats:f}),link:{url:A?O:y,label:i({id:"notification.ee.warning.seat-limit.link",defaultMessage:"{isHostedOnStrapiCloud, select, true {ADD SEATS} other {CONTACT SALES}}"},{isHostedOnStrapiCloud:A})},blockTransition:!0,onClose(){window.sessionStorage.setItem(`${u}-${m}`,!0)}})},[c,n,m,i,l,f,a,o,A,s])}},65013:(Z,I,t)=>{t.r(I),t.d(I,{AdminSeatInfoEE:()=>S});var e=t(67294),r=t(67819),g=t(75515),D=t(11047),T=t(84495),N=t(52624),p=t(36182),M=t(57993),C=t(51277),_=t(17772),v=t(86896),h=t(36833);const P="https://cloud.strapi.io/profile/billing",R="https://strapi.io/billing/request-seats",S=()=>{const{formatMessage:E}=(0,v.Z)(),{license:{licenseLimitStatus:U,enforcementUserCount:L,permittedSeats:u,isHostedOnStrapiCloud:O},isError:y,isLoading:G}=(0,h.q5)();return y||G||!u?null:e.createElement(r.P,{col:6,s:12},e.createElement(g.Z,{variant:"sigma",textColor:"neutral600"},E({id:"Settings.application.admin-seats",defaultMessage:"Admin seats"})),e.createElement(D.k,{gap:2},e.createElement(D.k,null,e.createElement(g.Z,{as:"p"},E({id:"Settings.application.ee.admin-seats.count",defaultMessage:"<text>{enforcementUserCount}</text>/{permittedSeats}"},{permittedSeats:u,enforcementUserCount:L,text:B=>e.createElement(g.Z,{fontWeight:"semiBold",textColor:L>u?"danger500":null},B)}))),U==="OVER_LIMIT"&&e.createElement(T.u,{description:E({id:"Settings.application.ee.admin-seats.at-limit-tooltip",defaultMessage:"At limit: add seats to invite more users"})},e.createElement(N.J,{width:`${(0,M.Q1)(14)}rem`,height:`${(0,M.Q1)(14)}rem`,color:"danger500",as:C.Z}))),e.createElement(p.r,{href:O?P:R,isExternal:!0,endIcon:e.createElement(_.Z,null)},E({id:"Settings.application.ee.admin-seats.add-seats",defaultMessage:"{isHostedOnStrapiCloud, select, true {Add seats} other {Contact sales}}"},{isHostedOnStrapiCloud:O})))}}}]);
