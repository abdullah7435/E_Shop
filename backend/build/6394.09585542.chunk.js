"use strict";(self.webpackChunkbackend=self.webpackChunkbackend||[]).push([[6394],{36833:(K,A,t)=>{t.d(A,{pl:()=>I,aY:()=>N,q5:()=>f});var e=t(67294),r=t(57993),P=t(25804),p=t(18172);const T={data:[],isLoading:!0},l=(a,E)=>(0,p.ZP)(a,n=>{switch(E.type){case"GET_DATA_SUCCEEDED":{n.data=E.data,n.isLoading=!1;break}case"GET_DATA_ERROR":{n.isLoading=!1;break}default:return n}}),I=({ssoEnabled:a})=>{const[E,n]=(0,e.useReducer)(l,T),O=(0,r.lm)(),{get:L}=(0,r.kY)();return(0,e.useEffect)(()=>{(async()=>{try{if(!a){n({type:"GET_DATA_SUCCEEDED",data:[]});return}const{data:_}=await L((0,P.IF)("providers"));n({type:"GET_DATA_SUCCEEDED",data:_})}catch(_){console.error(_),n({type:"GET_DATA_ERROR"}),O({type:"warning",message:{id:"notification.error"}})}})()},[L,a,O]),E};var h=t(14293),g=t.n(h),v=t(86896),C=t(16550),c=t(88767),d=t(86706),m=t(36364);function s(){const a=(0,d.v9)(m._),{get:E}=(0,r.kY)(),{isLoading:n,allowedActions:{canRead:O,canCreate:L,canUpdate:y,canDelete:_}}=(0,r.ss)(a.settings.users),U=O&&L&&y&&_,{data:u,isError:S,isLoading:B}=(0,c.useQuery)(["ee","license-limit-info"],async()=>{const{data:{data:W}}=await E("/admin/license-limit-information");return W},{enabled:!n&&U}),M=u??{},$=e.useCallback(W=>(M?.features??[]).find(x=>x.name===W)?.options??{},[M?.features]);return{license:M,getFeature:$,isError:S,isLoading:B}}const f=s,D="strapi-notification-seat-limit",i="https://cloud.strapi.io/profile/billing",Z="https://strapi.io/billing/request-seats",N=()=>{const{formatMessage:a}=(0,v.Z)();let{license:E,isError:n,isLoading:O}=f();const L=(0,r.lm)(),{pathname:y}=(0,C.TH)(),{enforcementUserCount:_,permittedSeats:U,licenseLimitStatus:u,isHostedOnStrapiCloud:S}=E;(0,e.useEffect)(()=>{if(n||O)return;const B=!g()(U)&&!window.sessionStorage.getItem(`${D}-${y}`)&&(u==="AT_LIMIT"||u==="OVER_LIMIT");let M;u==="OVER_LIMIT"?M="warning":u==="AT_LIMIT"&&(M="softWarning"),B&&L({type:M,message:a({id:"notification.ee.warning.over-.message",defaultMessage:"Add seats to {licenseLimitStatus, select, OVER_LIMIT {invite} other {re-enable}} Users. If you already did it but it's not reflected in Strapi yet, make sure to restart your app."},{licenseLimitStatus:u}),title:a({id:"notification.ee.warning.at-seat-limit.title",defaultMessage:"{licenseLimitStatus, select, OVER_LIMIT {Over} other {At}} seat limit ({enforcementUserCount}/{permittedSeats})"},{licenseLimitStatus:u,enforcementUserCount:_,permittedSeats:U}),link:{url:S?i:Z,label:a({id:"notification.ee.warning.seat-limit.link",defaultMessage:"{isHostedOnStrapiCloud, select, true {ADD SEATS} other {CONTACT SALES}}"},{isHostedOnStrapiCloud:S})},blockTransition:!0,onClose(){window.sessionStorage.setItem(`${D}-${y}`,!0)}})},[L,E,y,a,O,U,u,_,S,n])}},76394:(K,A,t)=>{t.r(A),t.d(A,{LoginEE:()=>d});var e=t(67294),r=t(70004),P=t(41580),p=t(11047),T=t(75515),R=t(45697),l=t.n(R),o=t(86896),I=t(46449),h=t(50745),g=t(31640),v=t(36833),C=t(80090);const c=(0,I.ZP)(r.i)`
  flex: 1;
`,d=m=>{const s=window.strapi.features.isEnabled(window.strapi.features.SSO),{isLoading:f,data:D}=(0,v.pl)({ssoEnabled:s}),{formatMessage:i}=(0,o.Z)();return!s||!f&&D.length===0?e.createElement(h.ZP,null,e.createElement(g.Z,{...m})):e.createElement(h.ZP,null,e.createElement(g.Z,{...m},e.createElement(P.x,{paddingTop:7},e.createElement(p.k,{direction:"column",alignItems:"stretch",gap:7},e.createElement(p.k,null,e.createElement(c,null),e.createElement(P.x,{paddingLeft:3,paddingRight:3},e.createElement(T.Z,{variant:"sigma",textColor:"neutral600"},i({id:"Auth.login.sso.divider"}))),e.createElement(c,null)),e.createElement(C.Z,{providers:D,displayAllProviders:!1})))))};d.defaultProps={onSubmit:m=>m.preventDefault(),requestError:null},d.propTypes={formErrors:l().object.isRequired,modifiedData:l().object.isRequired,onChange:l().func.isRequired,onSubmit:l().func,requestError:l().object}},80090:(K,A,t)=>{t.d(A,{Z:()=>m});var e=t(67294),r=t(11047),P=t(84495),p=t(75515),T=t(11276),R=t(67819),l=t(45697),o=t.n(l),I=t(86896),h=t(73727),g=t(46449);const v=g.ZP.a`
  width: ${136/16}rem;
  display: flex;
  justify-content: center;
  align-items: center;
  height: ${48/16}rem;
  border: 1px solid ${({theme:s})=>s.colors.neutral150};
  border-radius: ${({theme:s})=>s.borderRadius};
  text-decoration: inherit;
  &:link {
    text-decoration: none;
  }
  color: ${({theme:s})=>s.colors.neutral600};
`,C=(0,g.ZP)(r.k)`
  & a:not(:first-child):not(:last-child) {
    margin: 0 ${({theme:s})=>s.spaces[2]};
  }
  & a:first-child {
    margin-right: ${({theme:s})=>s.spaces[2]};
  }
  & a:last-child {
    margin-left: ${({theme:s})=>s.spaces[2]};
  }
`,c=({provider:s})=>e.createElement(P.u,{label:s.displayName},e.createElement(v,{href:`${window.strapi.backendURL}/admin/connect/${s.uid}`},s.icon?e.createElement("img",{src:s.icon,"aria-hidden":!0,alt:"",height:"32px"}):e.createElement(p.Z,null,s.displayName)));c.propTypes={provider:o().shape({icon:o().string,displayName:o().string.isRequired,uid:o().string.isRequired}).isRequired};const d=({providers:s,displayAllProviders:f})=>{const{formatMessage:D}=(0,I.Z)();return f?e.createElement(T.r,{gap:4},s.map(i=>e.createElement(R.P,{key:i.uid,col:4},e.createElement(c,{provider:i})))):s.length>2&&!f?e.createElement(T.r,{gap:4},s.slice(0,2).map(i=>e.createElement(R.P,{key:i.uid,col:4},e.createElement(c,{provider:i}))),e.createElement(R.P,{col:4},e.createElement(P.u,{label:D({id:"global.see-more"})},e.createElement(v,{as:h.rU,to:"/auth/providers"},e.createElement("span",{"aria-hidden":!0},"\u2022\u2022\u2022"))))):e.createElement(C,{justifyContent:"center"},s.map(i=>e.createElement(c,{key:i.uid,provider:i})))};d.defaultProps={displayAllProviders:!0},d.propTypes={providers:o().arrayOf(o().object).isRequired,displayAllProviders:o().bool};const m=d}}]);
